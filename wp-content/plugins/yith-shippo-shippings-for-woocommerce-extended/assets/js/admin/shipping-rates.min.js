jQuery((function(i){var t=i(".yith-shippo-validator-modal"),o=i(".yith-shippo-validator-modal--overlay"),s=!1,a=function(){o.fadeOut(),t.fadeOut()},e=function(a){var e=i(this).closest("div"),p=i(".yith-shippo-products-offset"),l=p.data("offset"),h=p.data("limit"),d={action:yith_shippo_shipping_rates_params.actions.validateProducts,security:yith_shippo_shipping_rates_params.security,offset:l,limit:h};e.block({message:"",overlayCSS:{backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"}}),i.ajax({type:"POST",dataType:"json",data:d,url:yith_shippo_shipping_rates_params.ajaxurl,success:function(e){if(e.success){var p=e.wrongProducts,d=e.countProducts;void 0!==p&&0!==p||void 0===a||s?(s=!0,t.removeClass("yith-shippo-validator-modal__success"),t.addClass("yith-shippo-validator-modal__failed"),d>3&&t.addClass("yith-shippo-validator-modal__more_products"),c(p,d),i(".yith-shippo-products-offset").data("offset",l+h)):(t.removeClass("yith-shippo-validator-modal__failed"),t.addClass("yith-shippo-validator-modal__success")),o.fadeIn(),t.fadeIn()}else alert(e("error"))},complete:function(){!function(i){i.unblock()}(e)}})},c=function(t,o){var s=i(".yith-shippo-invalid-products-list"),a=i(".yith-shippo-product-count");i(s).append(t),a.html(o)};i(document).on("click",".yith-shippo-validate-products-weights-dimension",e),i(".yith-shippo-failed-validation").on("scroll",(function(t){var o=i(this).get(0);o.scrollTop+o.clientHeight+1>o.scrollHeight&&e()})),i(document).on("click",".yith-shippo-close, .yith-shippo-close-button",a),i(document).on("click keyup",(function(t){("keyup"===t.type&&"Escape"===t.key||"click"===t.type&&i(t.target).hasClass("yith-shippo-validator-modal--overlay"))&&a()})),i(document).on("change","#yith-shippo-show-live-shipping-rates-cart-checkout",(function(t){var o=i("#yith-shippo-enable-limit-rate"),s=i("#yith-shippo-enable-limit-cost");i(this).is(":checked")||(o.is(":checked")&&o.click(),s.is(":checked")&&s.click())}))}));